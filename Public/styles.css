/* ---------- Theme (deterministic via data-theme only) ---------- */
:root{
  /* dark defaults */
  --bg: radial-gradient(1200px 800px at 10% -10%, #99f 0%, transparent 50%),
        radial-gradient(1000px 900px at 110% 10%, #9ff 0%, transparent 50%),
        #0b0c10;
  --panel: rgba(21,24,32,.55);
  --card: rgba(21,24,32,.55);
  --border: rgba(255,255,255,.12);
  --text: #e6eef5;
  --muted: #a7b0bb;
  --accent: #7dd3fc;
  --ok-bg: rgba(29,185,84,.15);  --ok: #1db954;
  --warn-bg: rgba(255,179,0,.15);--warn:#ffb300;
  --bad-bg: rgba(255,77,77,.18); --bad:#ff4d4d;
  --shadow: 0 16px 36px rgba(0,0,0,.35);
  --radius: 16px;
  --glass: blur(16px) saturate(1.15);
}

html[data-theme="light"]{
  --bg: radial-gradient(900px 700px at -10% -10%, #dceafe 0%, transparent 50%),
        radial-gradient(900px 700px at 110% 0%, #d2fff1 0%, transparent 50%),
        #f7f9fc;
  --panel:#ffffffb3;
  --card:#ffffffcc;
  --border:#e6eaf0;
  --text:#111827;
  --muted:#667085;
  --accent:#0ea5e9;
  --shadow: 0 16px 26px rgba(16,24,40,.10);
}

html[data-theme="dark"]{ color-scheme: dark; }
html[data-theme="light"]{ color-scheme: light; }

/* ---------- Base ---------- */
*{ box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin:0; color:var(--text); background: var(--bg) fixed;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
  line-height:1.5; overflow-x: hidden;
}

/* Ambience */
.blob{ position: fixed; filter: blur(60px); opacity:.45; z-index:-2; pointer-events:none; }
.b1{ width: 46vw; height: 46vw; left:-10vw; top:-8vw;
  background: radial-gradient(closest-side,#60a5fa,transparent 70%); animation: float 16s ease-in-out infinite; }
.b2{ width: 40vw; height: 40vw; right:-8vw; top:6vw;
  background: radial-gradient(closest-side,#22d3ee,transparent 70%); animation: float 18s ease-in-out infinite reverse; }
@keyframes float{ 50%{ transform: translateY(20px) scale(1.02);} }
.grain{ position: fixed; inset:0; pointer-events:none; z-index:-1; opacity:.06;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' opacity='.5'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' /%3E%3C/svg%3E"); }

/* ---------- Layout ---------- */
.container{ max-width: 980px; margin-inline:auto; padding-inline: 20px; }
.row{ display:flex; gap:12px; }
.between{ justify-content: space-between; }
.center{ align-items: center; }
.gap{ gap:8px; }

/* Topbar */
.topbar{ position:sticky; top:0; z-index:5; backdrop-filter: var(--glass); background: linear-gradient( to bottom, rgba(0,0,0,.25), transparent ); padding:10px 0; }
.brand{ display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px; }
.mark{ width:28px; height:28px; }
.title{ font-size: 18px; }
.accent{ color: var(--accent); }
.actions .ghost{ margin-left:6px; }

/* Hero */
.hero{ padding: 26px 0 6px; }
.headline{
  margin: 0 0 8px;
  font-size: clamp(26px, 3.6vw, 38px);
  line-height: 1.1;
  letter-spacing: .2px;
  text-shadow: 0 2px 18px rgba(0,0,0,.25);
}
.subtitle{ color: var(--muted); max-width: 720px; margin: 0; }

/* Cards */
.card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 18px;
  margin-bottom: 16px;
}
.glass{ backdrop-filter: var(--glass); }
.pop{ animation: pop .35s ease both; }
@keyframes pop{ from{ transform: translateY(8px) scale(.99); opacity: .0; } to{ transform: none; opacity:1; } }

.card-header{ margin-bottom: 8px; }
.card-title{ margin:0; font-size: 18px; letter-spacing: .2px; }
.muted{ color: var(--muted); }

/* Form */
.label{ font-weight:700; margin-bottom: 6px; display:block; }
textarea, input[type="text"]{
  width:100%; border-radius: 12px; border:1px solid var(--border);
  background: rgba(255,255,255,.05); color: var(--text);
  padding: 12px 14px; font-size: 16px; outline: none; transition: border .2s, background .2s, box-shadow .2s;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
}
textarea{ min-height: 120px; resize: vertical; }
textarea:focus, input[type="text"]:focus{
  border-color: rgba(125,211,252,.7);
  box-shadow: 0 0 0 4px rgba(125,211,252,.12);
  background: rgba(255,255,255,.07);
}
.field-row{ display: grid; grid-template-columns: 1fr 1.1fr; gap: 12px; margin-top: 10px; }
@media (max-width: 720px){ .field-row{ grid-template-columns: 1fr; } }

.file{
  position: relative; border:1px dashed var(--border); border-radius:12px; padding: 14px;
  text-align:center; color:var(--muted); background: rgba(255,255,255,.03);
}
.file input[type="file"]{ position:absolute; inset:0; width:100%; height:100%; opacity:0; cursor:pointer; }
.file-label{ pointer-events:none; }
form.drag .file{ border-color: var(--accent); background: rgba(125,211,252,.08); }

/* Buttons */
button, .btn{
  appearance: none; border:1px solid var(--border); background: rgba(255,255,255,.06); color: var(--text);
  border-radius: 12px; padding:10px 14px; font-weight:800; cursor:pointer; transition: transform .05s ease, background .2s, border .2s, box-shadow .2s;
}
button:hover{ background: rgba(255,255,255,.12); box-shadow: 0 6px 18px rgba(0,0,0,.15); }
button:active{ transform: translateY(1px); }
button:disabled{ opacity:.6; cursor:not-allowed; }
.btn.primary{
  background: linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.06));
  border-color: rgba(255,255,255,.22);
}
.btn-icon{ margin-right:6px; }
.ghost{ background: transparent; border-color: transparent; color: var(--text); }
.kbd{ display:inline-block; padding: 3px 7px; border:1px solid var(--border); border-radius: 6px; background: rgba(255,255,255,.08); font-weight:700; }

/* Theme toggle icons (fixed) */
.icon{ font-size: 18px; line-height: 0; }
.only-dark{ display: none; } /* hidden by default */
html[data-theme="dark"] .only-dark{ display: inline; }
html[data-theme="dark"] .only-light{ display: none; }

/* Result */
.result-area{ min-height: 220px; }
.placeholder{ display:grid; place-items:center; gap:6px; padding: 20px; border: 1px dashed var(--border); border-radius: 12px; color:var(--muted); }
.placeholder-icon{ font-size: 28px; }

.pill{
  display:inline-flex; align-items:center; gap:6px;
  padding: 6px 10px; border-radius: 999px; font-weight: 900; letter-spacing:.2px;
  border: 1px solid var(--border); background: rgba(255,255,255,.08);
  box-shadow: inset 0 -1px 0 rgba(255,255,255,.06);
}
.ok{ background: var(--ok-bg); color: var(--ok); }
.warn{ background: var(--warn-bg); color: var(--warn); }
.bad{ background: var(--bad-bg); color: var(--bad); }

img.thumb{ max-width: 100%; border-radius: 12px; border: 1px solid var(--border); box-shadow: 0 6px 18px rgba(0,0,0,.2); }

/* Footer */
.footer{ padding: 26px 0 40px; }

/* Loader */
.loader{
  display:inline-block; width:18px; height:18px; border-radius:50%;
  background: conic-gradient(from 0deg, var(--accent), transparent 60%);
  -webkit-mask: radial-gradient(farthest-side, transparent 60%, #000 61%);
          mask: radial-gradient(farthest-side, transparent 60%, #000 61%);
  animation: spin .7s linear infinite;
  vertical-align: -3px;
}
@keyframes spin{ to{ transform: rotate(360deg);} }

/* Toast */
.toast{
  position: fixed; inset: auto 16px 16px auto; z-index: 50;
  background: rgba(20,22,28,.92); color: #e7edf5; border: 1px solid rgba(255,255,255,.12);
  border-radius: 12px; padding: 10px 12px; min-width: 220px; max-width: 60ch;
  box-shadow: var(--shadow); transform: translateY(12px); opacity: 0; pointer-events: none; transition: .25s ease;
}
.toast.show{ transform: translateY(0); opacity: 1; }
